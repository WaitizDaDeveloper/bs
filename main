<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>MyFit - Exports PNG transparents</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6; color: #333;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh; overflow-x: hidden;
  }
  .container { max-width: 1200px; margin: 0 auto; padding: 20px; }

  /* Barre d’export (n’est jamais capturée) */
  .export-toolbar {
    position: sticky; top: 0; z-index: 9999;
    background: rgba(255,255,255,.9); backdrop-filter: blur(6px);
    border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,.12);
    padding: 12px; margin: 16px auto; max-width: 1200px;
  }
  .export-toolbar h2 { font-size: 16px; margin-bottom: 8px; }
  .export-grid {
    display: grid; gap: 8px;
    grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
  }
  .export-btn {
    cursor: pointer; border: 0; border-radius: 10px; padding: 10px 12px;
    background: linear-gradient(135deg,#667eea,#764ba2); color: #fff; font-weight: 600;
  }
  .export-all { background: linear-gradient(135deg,#16a085,#27ae60); }

  .section {
    background: rgba(255,255,255,0.95);
    margin: 30px 0; border-radius: 20px; padding: 30px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.1); backdrop-filter: blur(10px);
  }

  /* ===== Vos styles existants (inchangés) ===== */
  .title {
    text-align: center; font-size: 2.5em; font-weight: bold;
    background: linear-gradient(135deg, #667eea, #764ba2);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    margin-bottom: 20px;
  }
  .section-title {
    font-size: 1.8em; font-weight: bold; color: #2c3e50;
    margin-bottom: 25px; text-align: center; position: relative;
  }
  .section-title::after {
    content: ''; position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%);
    width: 60px; height: 4px; background: linear-gradient(90deg, #667eea, #764ba2); border-radius: 2px;
  }

  /* Problem → Solution */
  .problem-solution {
    display: grid; grid-template-columns: 1fr auto 1fr;
    gap: 30px; align-items: center; margin: 40px 0;
  }
  .problem-box, .solution-box { padding: 25px; border-radius: 15px; position: relative; color: #fff; }
  .problem-box { background: linear-gradient(135deg, #ff6b6b, #ee5a24); }
  .solution-box { background: linear-gradient(135deg, #00d2d3, #54a0ff); }
  .arrow { font-size: 40px; color: #4834d4; animation: pulse 2s infinite; }
  @keyframes pulse { 0%,100%{transform:scale(1)} 50%{transform:scale(1.2)} }

  /* MVP timeline */
  .mvp-timeline { position: relative; padding: 20px 0; }
  .timeline-line {
    position: absolute; left: 50%; top: 0; bottom: 0; width: 4px;
    background: linear-gradient(180deg, #667eea, #764ba2); transform: translateX(-50%);
  }
  .timeline-item { display: flex; align-items: center; margin: 30px 0; position: relative; }
  .timeline-item:nth-child(odd){ justify-content:flex-end; text-align:right; }
  .timeline-content {
    width: 45%; background: #fff; padding: 20px; border-radius: 15px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.1); border: 3px solid transparent; background-clip: padding-box;
  }
  .timeline-item:nth-child(1) .timeline-content { border-color: #ff6b6b; }
  .timeline-item:nth-child(2) .timeline-content { border-color: #4834d4; }
  .timeline-item:nth-child(3) .timeline-content { border-color: #00d2d3; }
  .timeline-dot {
    width: 20px; height: 20px; border-radius: 50%; background: #fff; border: 4px solid #667eea;
    position: absolute; left: 50%; transform: translateX(-50%); z-index: 2;
  }

  /* Experiment */
  .experiment-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 25px; margin: 30px 0;
  }
  .experiment-card {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white; padding: 25px; border-radius: 15px; text-align: center;
    transform: translateY(0); transition: all .3s ease;
  }
  .experiment-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,.2); }
  .experiment-number { font-size: 2.5em; font-weight: bold; margin-bottom: 10px; }

  /* Data collection bloc sous l’experiment */
  .data-collection {
    background: linear-gradient(135deg, #a8edea, #fed6e3);
    padding: 25px; border-radius: 15px; margin-top: 20px; color: #2c3e50;
  }

  /* Metrics */
  .metrics-dashboard {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px; margin: 30px 0;
  }
  .metric-card {
    background: #fff; border-radius: 15px; padding: 25px; text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-left: 5px solid; position: relative; overflow: hidden;
  }
  .metric-card::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
    background: linear-gradient(90deg, var(--metric-color), transparent);
  }
  .metric-card:nth-child(1){ border-color:#ff6b6b; --metric-color:#ff6b6b; }
  .metric-card:nth-child(2){ border-color:#4834d4; --metric-color:#4834d4; }
  .metric-card:nth-child(3){ border-color:#00d2d3; --metric-color:#00d2d3; }
  .metric-card:nth-child(4){ border-color:#feca57; --metric-color:#feca57; }
  .metric-card:nth-child(5){ border-color:#ff9ff3; --metric-color:#ff9ff3; }
  .metric-value { font-size: 2.2em; font-weight: bold; color: var(--metric-color); margin: 10px 0; }

  /* Process flow */
  .process-flow {
    display: flex; justify-content: space-between; align-items: center;
    flex-wrap: wrap; gap: 20px; margin: 40px 0;
  }
  .process-step {
    flex: 1; min-width: 200px; background: #fff; border-radius: 15px;
    padding: 20px; text-align: center; position: relative; box-shadow: 0 8px 25px rgba(0,0,0,0.1);
  }
  .process-step::after {
    content: '→'; position: absolute; right: -30px; top: 50%;
    transform: translateY(-50%); font-size: 24px; color: #667eea; font-weight: bold;
  }
  .process-step:last-child::after { display: none; }
  .step-number {
    width: 40px; height: 40px; border-radius: 50%;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white; display: flex; align-items: center; justify-content: center;
    font-weight: bold; margin: 0 auto 15px;
  }

  /* Decision matrix */
  .decision-matrix { background: #fff; border-radius: 15px; padding: 30px; margin: 30px 0; }
  .decision-row {
    display: grid; grid-template-columns: 1fr auto 2fr; align-items: center;
    padding: 20px 0; border-bottom: 2px solid #f8f9fa; gap: 30px;
  }
  .decision-row:last-child { border-bottom: none; }
  .decision-trigger { font-weight: bold; color: #2c3e50; }
  .decision-arrow { font-size: 24px; color: #667eea; }
  .decision-action {
    background: linear-gradient(135deg, #a8edea, #fed6e3);
    padding: 15px; border-radius: 10px; color: #2c3e50;
  }

  .mini-trial {
    background: linear-gradient(135deg, #fd79a8, #e84393);
    color: white; padding: 25px; border-radius: 15px; text-align: center; margin: 30px 0;
  }

  @media (max-width: 768px) {
    .problem-solution { grid-template-columns: 1fr; gap: 20px; }
    .arrow { transform: rotate(90deg); }
    .timeline-item { justify-content: center !important; text-align: center !important; }
    .timeline-content { width: 90%; }
    .process-flow { flex-direction: column; }
    .process-step::after { content: '↓'; right: 50%; top: 100%; transform: translate(50%, 10px); }
  }

  .highlight { background: linear-gradient(135deg, #ffeaa7, #fdcb6e); padding: 2px 8px; border-radius: 5px; font-weight: bold; }

  /* Mode export : figer les animations et éviter les découpes */
  body.exporting * { animation: none !important; }
  body.exporting .process-step { padding-right: 50px; }
  body.exporting .process-step::after { right: 10px; }
</style>
</head>
<body>
  <!-- Barre d’export -->
  <div class="export-toolbar">
    <h2>Exporter chaque visuel (PNG fond transparent)</h2>
    <div class="export-grid">
      <button class="export-btn" data-export="#viz-problem-solution" data-name="myfit-problem-solution.png">Problem → Solution</button>
      <button class="export-btn" data-export="#viz-mvp" data-name="myfit-mvp-timeline.png">MVP Timeline</button>
      <button class="export-btn" data-export="#viz-experiment-grid" data-name="myfit-experiment-grid.png">Experiment (cartes)</button>
      <button class="export-btn" data-export="#viz-datacollection" data-name="myfit-data-collection.png">Data Collection</button>
      <button class="export-btn" data-export="#viz-metrics" data-name="myfit-metrics.png">Metrics</button>
      <button class="export-btn" data-export="#viz-process" data-name="myfit-process.png">Measure / Process</button>
      <button class="export-btn" data-export="#viz-decision" data-name="myfit-decision.png">Decision Rules</button>
      <button class="export-btn" data-export="#viz-mini-trial" data-name="myfit-mini-trial.png">Mini-Trial CTA</button>
      <button class="export-btn export-all" id="export-all">Tout télécharger (8)</button>
    </div>
  </div>

  <div class="container">
    <h1 class="title">MyFit</h1>

    <!-- Section 1 -->
    <div class="section">
      <h2 class="section-title">Problem → Solution</h2>
      <div class="problem-solution" id="viz-problem-solution">
        <div class="problem-box">
          <h3>Problem Hypothesis</h3>
          <p>Gym-goers (beginners and previously injured time-pressed users) <strong>lack real-time form correction</strong>, leading to repeated faults and preventable pain. Without immediate feedback on their exercise form, users develop and reinforce bad movement patterns that can cause injuries or worsen existing conditions, ultimately discouraging consistent training.</p>
        </div>
        <div class="arrow">⟶</div>
        <div class="solution-box">
          <h3>Solution Hypothesis</h3>
          <p>MyFit uses <strong>video pose estimation</strong> to deliver instant, 3-word corrective cues through <strong>audio + on-screen overlay</strong> and a simple session summary. The system analyzes movement patterns in real-time via smartphone camera, providing immediate corrections during exercise execution to build proper form habits from the start.</p>
        </div>
      </div>
    </div>

    <!-- Section 2 -->
    <div class="section">
      <h2 class="section-title">MVP (Conversational Artifact)</h2>
      <div class="mvp-timeline" id="viz-mvp">
        <div class="timeline-line"></div>

        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content">
            <h3>Scope: 3 exercises</h3>
            <p><strong>Targeted movements:</strong> bench press, squat, and row. These fundamental compound exercises form the foundation of strength training and require precise technique to prevent injury, making them ideal for validating the real-time correction concept.</p>
          </div>
        </div>

        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content">
            <h3>Flow: 3-sec camera check</h3>
            <p><strong>Smart monitoring system:</strong> automatic posture analysis every 3 seconds with triggered cues ("Lower elbows 10°", "Knees out"). <span class="highlight">Green validation</span> when form is within acceptable range, followed by automatic session summary showing fault-to-correct rep ratio for progress tracking.</p>
          </div>
        </div>

        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content">
            <h3>Guardrails: on-device processing</h3>
            <p><strong>Privacy-first approach:</strong> local movement analysis when technically possible to protect user data. <strong>Emergency stop trigger</strong> on dangerous angles or unsafe postures to prevent injuries and ensure user safety during unsupervised training sessions.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Section 3 -->
    <div class="section">
      <h2 class="section-title">Experiment (France, 2 weeks)</h2>
      <div class="experiment-grid" id="viz-experiment-grid">
        <div class="experiment-card">
          <div class="experiment-number">2</div>
          <h3>Partner Gyms</h3>
          <p><strong>Testing sites:</strong> 2 commercial gyms + 1 university gym to diversify user demographics and validate the solution across different fitness environments and equipment setups.</p>
        </div>
        <div class="experiment-card">
          <div class="experiment-number">10-15</div>
          <h3>Test Users</h3>
          <p><strong>Representative sample:</strong> young practitioners + previously injured users to validate effectiveness on both target audiences and gather insights on different user needs and pain points.</p>
        </div>
        <div class="experiment-card">
          <div class="experiment-number">1+1</div>
          <h3>Professional Oversight</h3>
          <p><strong>Expert supervision:</strong> 1 certified coach + 1 physiotherapist for correction validation and safety protocol enforcement, ensuring medical accuracy of the feedback system.</p>
        </div>
        <div class="experiment-card">
          <div class="experiment-number">10%</div>
          <h3>Quality Control</h3>
          <p><strong>Safety review:</strong> coach validates correctness on a random 10% of sessions to ensure accuracy of corrections and calibrate the algorithm for optimal performance.</p>
        </div>
      </div>

      <div class="data-collection" id="viz-datacollection">
        <h3 style="text-align:center;margin-bottom:15px;">Data Collection</h3>
        <p><strong>Anonymous event logs:</strong> correction events recording + short pre/post pain check to measure therapeutic impact and user experience improvement. <strong>Short in-app survey (10 questions)</strong> after session 2 and session 6 to evaluate user satisfaction and perceived form improvement.</p>
      </div>
    </div>

    <!-- Section 4 -->
    <div class="section">
      <h2 class="section-title">Metrics (Success Thresholds)</h2>
      <div class="metrics-dashboard" id="viz-metrics">
        <div class="metric-card">
          <h3>Activation (first cue received)</h3>
          <div class="metric-value">≥35%</div>
          <p>Percentage of app installs that successfully receive their first corrective cue. This metric indicates the intuitiveness of the user interface and the effectiveness of the onboarding process in getting users to their first valuable interaction.</p>
        </div>
        <div class="metric-card">
          <h3>Technique Improvement</h3>
          <div class="metric-value">≥30%</div>
          <p>Reduction in repeated faults by week 2 compared to initial sessions. This measures the pedagogical effectiveness of the real-time correction system and validates the core value proposition of form improvement.</p>
        </div>
        <div class="metric-card">
          <h3>Week-1 Retention (≥2 sessions)</h3>
          <div class="metric-value">≥30%</div>
          <p>Users who return for at least 2 training sessions within the first week. This early retention metric indicates initial user engagement and perceived value from the correction system.</p>
        </div>
        <div class="metric-card">
          <h3>Willingness to Pay (yes/maybe)</h3>
          <div class="metric-value">≥30%</div>
          <p>Combined positive response rate to payment willingness question. NPS (Net Promoter Score) ≥ +20 points measuring overall satisfaction and likelihood to recommend the product to other gym users.</p>
        </div>
        <div class="metric-card">
          <h3>Safety</h3>
          <div class="metric-value">0</div>
          <p>Zero adverse events with red-flag rate &lt; 2% of total sessions. Safety is the absolute priority, ensuring that the correction system never leads to injury or unsafe movement patterns.</p>
        </div>
      </div>
    </div>

    <!-- Section 5 -->
    <div class="section">
      <h2 class="section-title">Measure (How We Track)</h2>
      <div class="process-flow" id="viz-process">
        <div class="process-step">
          <div class="step-number">1</div>
          <h3>Automatic Logs</h3>
          <p><strong>Continuous recording:</strong> sets, cues issued, "within-range" confirmations for real-time progress tracking and algorithm performance measurement across all user sessions</p>
        </div>
        <div class="process-step">
          <div class="step-number">2</div>
          <h3>Manual Check</h3>
          <p><strong>Quality validation:</strong> coach tags correctness on a random sample to calibrate the AI system and ensure the accuracy of form corrections matches professional standards</p>
        </div>
        <div class="process-step">
          <div class="step-number">3</div>
          <h3>Short In-App Survey</h3>
          <p><strong>User feedback:</strong> 10-question survey administered after session 2 and session 6 to capture satisfaction, perceived improvement, and willingness to continue using the product</p>
        </div>
      </div>
    </div>

    <!-- Section 6 -->
    <div class="section">
      <h2 class="section-title">Learn — Decision Rules (After 2 Weeks)</h2>
      <div class="decision-matrix" id="viz-decision">
        <div class="decision-row">
          <div class="decision-trigger">Hit ≥3/5 thresholds</div>
          <div class="decision-arrow">⟶</div>
          <div class="decision-action"><strong>GO:</strong> Expand exercise library + add 2 more gyms. Scale the successful model by increasing exercise variety and geographic reach to validate market demand at larger scale.</div>
        </div>
        <div class="decision-row">
          <div class="decision-trigger">Miss technique/retention</div>
          <div class="decision-arrow">⟶</div>
          <div class="decision-action"><strong>PIVOT:</strong> Iterate cue timing/wording; narrow to top 2 exercises; re-test 1 week. Focus on optimizing the core correction mechanism before expanding scope.</div>
        </div>
        <div class="decision-row">
          <div class="decision-trigger">Safety issues OR &lt;15% activation</div>
          <div class="decision-arrow">⟶</div>
          <div class="decision-action"><strong>KILL/RETHINK:</strong> Switch to post-set feedback only or fundamentally reconsider the real-time correction approach if safety concerns arise or user adoption is too low.</div>
        </div>
      </div>
    </div>

    <!-- CTA -->
    <div class="mini-trial" id="viz-mini-trial">
      <h3>Pilot Ask (CTA, One Line)</h3>
      <p><strong>2-week mini-trial</strong> with anonymized report for the gym/clinic; coach/physio co-signature on safety protocol to ensure professional oversight and credibility.</p>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Charge html2canvas une seule fois
    let h2cPromise = null;
    function ensureHtml2Canvas() {
      if (window.html2canvas) return Promise.resolve(window.html2canvas);
      if (h2cPromise) return h2cPromise;
      h2cPromise = new Promise((resolve, reject) => {
        const s = document.createElement('script');
        s.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
        s.onload = () => resolve(window.html2canvas);
        s.onerror = reject;
        document.head.appendChild(s);
      });
      return h2cPromise;
    }

    async function exportElement(selector, filename) {
      const el = document.querySelector(selector);
      if (!el) return;
      const html2canvas = await ensureHtml2Canvas();

      // Mode export (désactive animations, ajuste flèches, etc.)
      document.body.classList.add('exporting');

      // Ajoute un conteneur transparent avec marge pour éviter les découpes d’ombres
      const wrapper = document.createElement('div');
      wrapper.style.padding = '20px';
      wrapper.style.background = 'transparent';
      wrapper.style.position = 'fixed';
      wrapper.style.left = '-99999px';
      wrapper.style.top = '0';
      wrapper.appendChild(el.cloneNode(true));
      document.body.appendChild(wrapper);

      const node = wrapper.firstElementChild;

      // Rendu
      const canvas = await html2canvas(node, {
        backgroundColor: null,   // fond transparent
        scale: 3,                // netteté
        useCORS: true,
        logging: false
      });

      // Téléchargement
      const link = document.createElement('a');
      link.download = filename;
      link.href = canvas.toDataURL('image/png');
      link.click();

      // Nettoyage
      document.body.removeChild(wrapper);
      document.body.classList.remove('exporting');
    }

    // Boutons individuels
    document.addEventListener('click', (e) => {
      const btn = e.target.closest('[data-export]');
      if (!btn) return;
      const sel = btn.getAttribute('data-export');
      const name = btn.getAttribute('data-name') || 'export.png';
      exportElement(sel, name);
    });

    // Tout télécharger
    document.getElementById('export-all')?.addEventListener('click', async () => {
      const batch = [
        ['#viz-problem-solution','myfit-problem-solution.png'],
        ['#viz-mvp','myfit-mvp-timeline.png'],
        ['#viz-experiment-grid','myfit-experiment-grid.png'],
        ['#viz-datacollection','myfit-data-collection.png'],
        ['#viz-metrics','myfit-metrics.png'],
        ['#viz-process','myfit-measure-process.png'],
        ['#viz-decision','myfit-decision.png'],
        ['#viz-mini-trial','myfit-mini-trial.png']
      ];
      for (const [sel, name] of batch) {
        // séquentiel pour éviter les conflits de rendu
        // eslint-disable-next-line no-await-in-loop
        await exportElement(sel, name);
      }
    });
  </script>
</body>
</html>
